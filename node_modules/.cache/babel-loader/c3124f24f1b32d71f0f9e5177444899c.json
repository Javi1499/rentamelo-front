{"ast":null,"code":"import _objectSpread from\"/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useForm}from\"react-hook-form\";import{Alert,Button,CustomInput,CustomInputFile,Select}from'components';import{arrayCategories,arrayCity,arrayTime}from'utils';import axios from'axios';import{FormContainer,InputName,InputDescription,InputPrice,InputTime,InputImage,Span,InputCategory,ButtonContainer,Wrapper}from'./styled';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Component=function Component(){var _errors$name;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showAlert=_useState2[0],_setShowAlert=_useState2[1];var _useForm=useForm(),register=_useForm.register,errors=_useForm.errors,handleSubmit=_useForm.handleSubmit;var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dataProduct,e){var data,index,respuesta;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();data=new FormData();for(index=0;index<dataProduct.files.length;index++){data.append(\"files\",dataProduct.files[index]);}data.append('name',dataProduct.name);data.append('description',dataProduct.description);data.append('idDeliveryTime',dataProduct.time);data.append('idLocation',dataProduct.location);data.append('price',dataProduct.price);data.append('idCategory',dataProduct.category);console.log(data);_context.next=12;return axios.post(\"http://localhost:4006/productos/nuevo-producto\",data,{headers:{'Content-Type':'multipart/form-data'}});case 12:respuesta=_context.sent;if(!(respuesta.status===200)){_context.next=19;break;}console.log(\"TODO OK\");setTimeout(function(){_setShowAlert(false);window.location.href=\"/mis-productos\";},4000);_setShowAlert(true);_context.next=21;break;case 19:alert(\"error\");return _context.abrupt(\"return\");case 21:e.target.reset();case 22:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x,_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Wrapper,{children:[showAlert&&/*#__PURE__*/_jsx(Alert,{information:\"Producto agregado correctamente\",onClick:function onClick(){return _setShowAlert(false);},setShowAlert:function setShowAlert(){_setShowAlert(false);window.location.href=\"/mis-productos\";}}),/*#__PURE__*/_jsxs(FormContainer,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(InputName,{children:[/*#__PURE__*/_jsx(CustomInput,_objectSpread({type:\"string\",placeholder:\"Ej. Bocina Bluetooth\",label:\"Nombre del producto\"},register(\"name\"))),/*#__PURE__*/_jsx(Span,{children:errors===null||errors===void 0?void 0:(_errors$name=errors.name)===null||_errors$name===void 0?void 0:_errors$name.message})]}),/*#__PURE__*/_jsx(InputDescription,{children:/*#__PURE__*/_jsx(CustomInput,_objectSpread({type:\"string\",placeholder:\"Ej. Bocina Bluetooth \",label:\"Descripción del producto\"},register(\"description\")))}),/*#__PURE__*/_jsx(InputCategory,{children:/*#__PURE__*/_jsx(Select,_objectSpread({label:\"Categoría de tu producto\",options:arrayCategories},register(\"category\")))}),/*#__PURE__*/_jsx(InputPrice,{children:/*#__PURE__*/_jsx(CustomInput,_objectSpread({type:\"number\",label:\"Precio por día\"},register(\"price\")))}),/*#__PURE__*/_jsx(InputTime,{children:/*#__PURE__*/_jsx(Select,_objectSpread({label:\"¿En cuánto tiempo puedes entregar el producto?\",options:arrayTime},register(\"time\")))}),/*#__PURE__*/_jsx(InputTime,{children:/*#__PURE__*/_jsx(Select,_objectSpread({label:\"¿En dónde tienes el producto?\",options:arrayCity},register(\"location\")))}),/*#__PURE__*/_jsx(InputImage,{children:/*#__PURE__*/_jsx(CustomInputFile,_objectSpread({},register(\"files\")))}),/*#__PURE__*/_jsx(ButtonContainer,{children:/*#__PURE__*/_jsx(Button,{children:\"Publicar producto\",type:\"submit\"})})]})]});};export default Component;export{Component as Form};","map":{"version":3,"sources":["/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/src/components/Form/index.jsx"],"names":["React","useState","useForm","Alert","Button","CustomInput","CustomInputFile","Select","arrayCategories","arrayCity","arrayTime","axios","FormContainer","InputName","InputDescription","InputPrice","InputTime","InputImage","Span","InputCategory","ButtonContainer","Wrapper","Component","showAlert","setShowAlert","register","errors","handleSubmit","onSubmit","dataProduct","e","preventDefault","data","FormData","index","files","length","append","name","description","time","location","price","category","console","log","post","headers","respuesta","status","setTimeout","window","href","alert","target","reset","message","Form"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport { Alert, Button, CustomInput, CustomInputFile, Select } from 'components';\nimport { arrayCategories, arrayCity, arrayTime } from 'utils';\nimport axios from 'axios'\nimport { FormContainer, InputName, InputDescription, InputPrice, InputTime, InputImage, Span, InputCategory, ButtonContainer, Wrapper } from './styled';\nconst Component = () => {\n    const [showAlert, setShowAlert] = useState(false)\n    const { register, errors, handleSubmit } = useForm();\n\n    const onSubmit = async (dataProduct, e) => {\n        e.preventDefault()\n        const data = new FormData();\n        for (let index = 0; index < dataProduct.files.length; index++) {\n            data.append(\"files\", dataProduct.files[index])\n        }\n\n        data.append('name', dataProduct.name)\n        data.append('description', dataProduct.description)\n        data.append('idDeliveryTime', dataProduct.time)\n        data.append('idLocation', dataProduct.location)\n        data.append('price', dataProduct.price)\n        data.append('idCategory', dataProduct.category)\n\n\n        console.log(data);\n        const respuesta = await axios.post(\"http://localhost:4006/productos/nuevo-producto\", data, {\n            headers: {\n                'Content-Type': 'multipart/form-data',\n            }\n        });\n        if (respuesta.status === 200) {\n            console.log(\"TODO OK\")\n            setTimeout(() => {\n                setShowAlert(false);\n                window.location.href = \"/mis-productos\"\n            }, 4000)\n            setShowAlert(true)\n        } else {\n            alert(\"error\")\n            return;\n        }\n        e.target.reset();\n    };\n    return (\n        <Wrapper>\n            {showAlert && <Alert information={\"Producto agregado correctamente\"}\n                onClick={() => setShowAlert(false)}\n                setShowAlert={() => { setShowAlert(false); window.location.href = \"/mis-productos\" }} />}\n            <FormContainer onSubmit={handleSubmit(onSubmit)}  >\n                <InputName>\n                    <CustomInput\n                        type={\"string\"}\n                        placeholder={\"Ej. Bocina Bluetooth\"}\n                        label=\"Nombre del producto\"\n                        {...register(\"name\",)}\n                    />\n                    <Span>{errors?.name?.message}</Span>\n                </InputName>\n                <InputDescription>\n                    <CustomInput\n                        type={\"string\"}\n                        placeholder={\"Ej. Bocina Bluetooth \"}\n                        label={\"Descripción del producto\"}\n                        {...register(\"description\",)}\n                    />\n                </InputDescription>\n                <InputCategory>\n                    <Select label={\"Categoría de tu producto\"}\n                        options={arrayCategories}\n                        {...register(\"category\",)}\n                    />\n                </InputCategory>\n                <InputPrice>\n                    <CustomInput\n                        type=\"number\"\n                        label={\"Precio por día\"}\n                        {...register(\"price\",)}\n                    />\n                </InputPrice>\n                <InputTime>\n                    <Select label={\"¿En cuánto tiempo puedes entregar el producto?\"}\n                        options={arrayTime}\n                        {...register(\"time\",)}\n                    />\n                </InputTime>\n                <InputTime>\n                    <Select label={\"¿En dónde tienes el producto?\"}\n                        options={arrayCity}\n                        {...register(\"location\",)}\n                    />\n                </InputTime>\n                <InputImage>\n                    <CustomInputFile {...register(\"files\",)} />\n                </InputImage>\n                <ButtonContainer>\n                    <Button children={\"Publicar producto\"} type=\"submit\" />\n                </ButtonContainer>\n            </FormContainer>\n        </Wrapper>\n    );\n}\n\nexport default Component;\nexport { Component as Form }"]},"metadata":{},"sourceType":"module"}