{"ast":null,"code":"import _regeneratorRuntime from\"/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,Fragment}from'react';import axios from'axios';import{Button,Container,Form,Col,Row}from'react-bootstrap';import{setToken,initAxiosIntterceptos}from'../helpers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";initAxiosIntterceptos();var url=\"http://localhost:3000\";var urlServidor=\"http://localhost:4006\";var Login=function Login(){// const [estaRegistrado, setEstaRegistrado] = useState(true);\nvar _useState=useState({error:false,mensaje:\"\"}),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState({email:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),datosLogin=_useState4[0],setDatosLogin=_useState4[1];//Se actualiz el state con los datos ingresados \nvar actualizarState=function actualizarState(e){setDatosLogin(_objectSpread(_objectSpread({},datosLogin),{},_defineProperty({},e.target.name,e.target.value)));};var email=datosLogin.email,password=datosLogin.password;//Function para iniciar sesion\nvar functionIniciarSesion=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e,props){var respuesta;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(email.trim()===''||password.trim()===\"\")){_context.next=6;break;}setError({error:true,mensaje:\"Todos los campos son obligatorios\"});return _context.abrupt(\"return\");case 6:_context.next=8;return axios.post(\"\".concat(urlServidor,\"/autenticacion/login\"),datosLogin);case 8:respuesta=_context.sent;if(respuesta.data.status===200){setToken(respuesta.data.token);window.location.href=\"\".concat(url,\"/\");// if (respuesta.data.data.rol === \"admin\") {\n//     localStorage.setItem('admin', true);\n//     setError({ error: false })\n// }\n}else{setError({error:true,mensaje:respuesta.data.mensaje});}case 10:case\"end\":return _context.stop();}}},_callee);}));return function functionIniciarSesion(_x,_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsxs(Col,{className:\" col-6\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"INICIA SESI\\xD3N\"}),error.error?/*#__PURE__*/_jsx(\"p\",{className:\"alerta-error\",children:error.mensaje}):null,/*#__PURE__*/_jsxs(Form,{onSubmit:functionIniciarSesion,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Correo electronico\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"canela@correo.com\",name:\"email\",onChange:actualizarState,value:email}),/*#__PURE__*/_jsx(Form.Label,{children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"********\",name:\"password\",onChange:actualizarState,value:password}),/*#__PURE__*/_jsx(Button,{className:\"mt-2\",type:\"submit\",children:\"Iniciar SESI\\xD3N\"}),/*#__PURE__*/_jsxs(Col,{children:[\"No tienes cuenta? \",/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(url,\"/signup\"),children:\"Registrate\"})]})]})]})})})});};export default Login;","map":{"version":3,"sources":["/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/src/components/Login.js"],"names":["React","useState","Fragment","axios","Button","Container","Form","Col","Row","setToken","initAxiosIntterceptos","url","urlServidor","Login","error","mensaje","setError","email","password","datosLogin","setDatosLogin","actualizarState","e","target","name","value","functionIniciarSesion","props","preventDefault","trim","post","respuesta","data","status","token","window","location","href"],"mappings":"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","sourcesContent":["import React, { useState, Fragment } from 'react'\nimport axios from 'axios';\nimport { Button, Container, Form, Col, Row } from 'react-bootstrap';\nimport { setToken, initAxiosIntterceptos } from '../helpers';\ninitAxiosIntterceptos();\nconst url=\"http://localhost:3000\"\nconst urlServidor = \"http://localhost:4006\"\nconst Login = () => {\n   // const [estaRegistrado, setEstaRegistrado] = useState(true);\n    const [error, setError] = useState({ error: false, mensaje: \"\" });\n    const [datosLogin, setDatosLogin] = useState({\n        email: \"\",\n        password: \"\"\n    });\n\n    \n\n    //Se actualiz el state con los datos ingresados \n    const actualizarState = e => {\n        setDatosLogin({\n            ...datosLogin,\n            [e.target.name]: e.target.value\n        })\n    }\n\n    const { email, password } = datosLogin;\n\n    //Function para iniciar sesion\n    const functionIniciarSesion = async (e, props) => {\n        e.preventDefault();\n        if (email.trim() === '' || password.trim() === \"\") {\n            setError({ error: true, mensaje: \"Todos los campos son obligatorios\" });\n            return\n        } else {\n            const respuesta = await axios.post(`${urlServidor}/autenticacion/login`, datosLogin);\n            if (respuesta.data.status === 200) {\n                setToken(respuesta.data.token);\n                window.location.href=`${url}/`\n                // if (respuesta.data.data.rol === \"admin\") {\n                //     localStorage.setItem('admin', true);\n                //     setError({ error: false })\n                // }\n            } else {\n                setError({ error: true, mensaje: respuesta.data.mensaje })\n            }\n\n        }\n    }\n    return (\n        <Fragment >\n            <Container>\n                <Row className=\"justify-content-center\">\n                <Col className=\" col-6\">\n                        <h2>INICIA SESIÓN</h2>\n                        {error.error ? <p className=\"alerta-error\">{error.mensaje}</p> : null}\n\n                        <Form\n                            onSubmit={functionIniciarSesion}\n                        >\n                            <Form.Label>Correo electronico</Form.Label>\n                            <Form.Control\n                                type=\"email\"\n                                placeholder=\"canela@correo.com\"\n                                name=\"email\"\n                                onChange={actualizarState}\n                                value={email}\n                            />\n                            <Form.Label>Contraseña</Form.Label>\n                            <Form.Control\n                                type=\"password\"\n                                placeholder=\"********\"\n                                name=\"password\"\n                                onChange={actualizarState}\n                                value={password}\n                            />\n                            <Button className=\"mt-2\"\n                                type=\"submit\">\n                                Iniciar SESIÓN\n                            </Button>\n                            <Col>No tienes cuenta? <a href={`${url}/signup`}>Registrate</a></Col>\n                        </Form> \n                </Col>\n                </Row>\n            </Container>\n        </Fragment>\n    );\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}