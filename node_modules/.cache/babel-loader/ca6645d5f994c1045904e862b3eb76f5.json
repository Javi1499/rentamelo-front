{"ast":null,"code":"import _regeneratorRuntime from\"/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Button,ImageComponent,ImagesPreview,LessorInfo,Modal,ProductDetails,Alert}from'components';import axios from'axios';import{ProductView,DetailsContainer,LessorContainer,ImageContainer,PreviewContainer,ButtonContainer}from'./styled';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Component=function Component(_ref){var product=_ref.product,dataLessor=_ref.dataLessor,mainImg=_ref.mainImg;var _useState=useState(mainImg),_useState2=_slicedToArray(_useState,2),mainImage=_useState2[0],setMainImage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModal=_useState4[0],setShowModal=_useState4[1];var img1=product.img1,img2=product.img2,img3=product.img3;var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),valueDays=_useState6[0],setvalueDays=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showAlert=_useState8[0],setShowAlert=_useState8[1];var _useState9=useState({idProduct:product.idProduct,rentDays:null}),_useState10=_slicedToArray(_useState9,2),rentData=_useState10[0],setRentData=_useState10[1];useEffect(function(){setRentData(_objectSpread(_objectSpread({},setRentData),{},{rentDays:valueDays,idProduct:product.idProduct}));},[valueDays]);// //Process for create a rent\n// const realizarRenta = async () => {\n//     const res = await axios.post(`http://localhost:4006/rentas/realizar-renta`, rentData);\n//     if (res.status == 200) {\n//         window.location.href = \"/rentas\"\n//     } else {\n//         alert(\"No puedes rentar un producto tuyo\")\n//     }\n// }\nvar validateRent=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var validate;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"http://localhost:4006/rentas/validador/\".concat(product.idProduct));case 2:validate=_context.sent;if(!validate.data.mensaje){_context.next=5;break;}return _context.abrupt(\"return\",setShowAlert(true));case 5:handlerModal();case 6:case\"end\":return _context.stop();}}},_callee);}));return function validateRent(){return _ref2.apply(this,arguments);};}();var handlerModal=function handlerModal(){return setShowModal(function(prev){return!prev;});};return/*#__PURE__*/_jsxs(_Fragment,{children:[showAlert&&/*#__PURE__*/_jsx(Alert,{information:\"No te puedes rentar un producto de tu propiedad\",onClick:function onClick(){return setShowAlert(false);},setShowAlert:setShowAlert}),showModal&&/*#__PURE__*/_jsx(Modal,{valueSelect:valueDays,setValueSelect:setvalueDays,event:function event(){return window.location.href=\"/detallesRenta/\".concat(rentData.idProduct,\"/\").concat(rentData.rentDays);},showModal:handlerModal}),/*#__PURE__*/_jsxs(ProductView,{children:[/*#__PURE__*/_jsx(PreviewContainer,{children:/*#__PURE__*/_jsx(ImagesPreview,{images:[img1,img2,img3],setMainImage:setMainImage})}),/*#__PURE__*/_jsx(ImageContainer,{children:/*#__PURE__*/_jsx(ImageComponent,{src:mainImage||mainImg})}),/*#__PURE__*/_jsx(DetailsContainer,{children:/*#__PURE__*/_jsx(ProductDetails,{dataProduct:product})}),/*#__PURE__*/_jsx(LessorContainer,{children:/*#__PURE__*/_jsx(LessorInfo,{dataLessor:dataLessor})}),/*#__PURE__*/_jsx(ButtonContainer,{children:/*#__PURE__*/_jsx(Button,{children:\"RENTAR PRODUCTO\",onClick:function onClick(){return validateRent();}})})]})]});};export default Component;export{Component as ProductView};","map":{"version":3,"sources":["/home/javier/Escritorio/Practica_programacion/app-rentamelo/fronted-rentamelo/src/components/ProductView/index.jsx"],"names":["React","useState","useEffect","Button","ImageComponent","ImagesPreview","LessorInfo","Modal","ProductDetails","Alert","axios","ProductView","DetailsContainer","LessorContainer","ImageContainer","PreviewContainer","ButtonContainer","Component","product","dataLessor","mainImg","mainImage","setMainImage","showModal","setShowModal","img1","img2","img3","valueDays","setvalueDays","showAlert","setShowAlert","idProduct","rentDays","rentData","setRentData","validateRent","post","validate","data","mensaje","handlerModal","prev","window","location","href"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Button, ImageComponent, ImagesPreview, LessorInfo, Modal, ProductDetails, Alert } from 'components';\nimport axios from 'axios'\nimport { ProductView, DetailsContainer, LessorContainer, ImageContainer, PreviewContainer, ButtonContainer, } from './styled';\n\nconst Component = ({ product, dataLessor, mainImg }) => {\n    const [mainImage, setMainImage] = useState(mainImg);\n    const [showModal, setShowModal] = useState(false)\n    const { img1, img2, img3 } = product;\n    const [valueDays, setvalueDays] = useState(0)\n    const [showAlert, setShowAlert] = useState(false)\n    const [rentData, setRentData] = useState({\n\n        idProduct: product.idProduct,\n        rentDays: null\n    });\n    useEffect(() => {\n        setRentData({ ...setRentData, rentDays: valueDays, idProduct: product.idProduct })\n\n    }, [valueDays])\n\n    // //Process for create a rent\n    // const realizarRenta = async () => {\n    //     const res = await axios.post(`http://localhost:4006/rentas/realizar-renta`, rentData);\n    //     if (res.status == 200) {\n    //         window.location.href = \"/rentas\"\n    //     } else {\n    //         alert(\"No puedes rentar un producto tuyo\")\n    //     }\n    // }\n\n    const validateRent = async () => {\n        const validate = await axios.post(`http://localhost:4006/rentas/validador/${product.idProduct}`)\n        if (validate.data.mensaje) return setShowAlert(true);\n        handlerModal()\n\n    }\n\n    const handlerModal = () => setShowModal(prev => !prev)\n    return (<>\n        {showAlert && <Alert information={\"No te puedes rentar un producto de tu propiedad\"} onClick={() => setShowAlert(false)} setShowAlert={setShowAlert} />}\n        {showModal && <Modal valueSelect={valueDays}\n            setValueSelect={setvalueDays}\n            event={() => window.location.href = `/detallesRenta/${rentData.idProduct}/${rentData.rentDays}`}\n            showModal={handlerModal} />}\n        <ProductView>\n\n            <PreviewContainer>\n                <ImagesPreview images={[img1, img2, img3]} setMainImage={setMainImage} />\n            </PreviewContainer>\n            <ImageContainer>\n                <ImageComponent src={mainImage || mainImg} />\n            </ImageContainer>\n            <DetailsContainer>\n                <ProductDetails dataProduct={product} />\n            </DetailsContainer>\n            <LessorContainer>\n                <LessorInfo dataLessor={dataLessor} />\n            </LessorContainer>\n            <ButtonContainer>\n                <Button children={\"RENTAR PRODUCTO\"} onClick={() => validateRent()} />\n            </ButtonContainer>\n        </ProductView>\n    </>\n    );\n}\n\nexport default Component;\nexport { Component as ProductView }"]},"metadata":{},"sourceType":"module"}